(function(a){a.widget("w.pagination",{options:{containerClass:"pagination",pageCount:0,currentPage:1,pageLimit:4,limitPaging:true,activeClass:"active",disabledClass:"disabled",previousBtn:"&larr; Previous",nextBtn:"Next &rarr;",hideEmpty:true,conected:false,connectWith:null},_create:function(){var b=this,d=b.options,c=b.element;
b.container=a("<div></div>",{"class":d.containerClass});b.paging=a("<ul></ul>");b.divider="<li class='disabled'><a href='#'>...</a></li>";b.totalPages=d.pageCount;
b.buildPagination();b.container.html(b.paging);b.setNewPage(d.currentPage);c.on("click","li[data-role='paging']",a.proxy(this.setNewPage,this));c.on("click","li[data-role='prev-btn'], li[data-role='next-btn']",a.proxy(b.directionalNav,this));
c.html(b.container);if(d.connectWith!=null&&a(d.connectWith).size()>0){b.connectedControls();}},directionalNav:function(c){var b=this;c&&c.preventDefault();
if(a(c.currentTarget).hasClass("disabled")){return;}switch(a(c.currentTarget).attr("data-role")){case"prev-btn":b.goToPrevPage();break;case"next-btn":b.goToNextPage();
break;}},_init:function(){var b=this,d=b.options,c=b.element;b._hideEmpty();console.log("init called");console.log("page count is ",d.pageCount);},_hideEmpty:function(){var b=this,d=b.options,c=b.element;
if(d.hideEmpty&&(d.pageCount<2)){this.container.hide();}else{this.container.show();}},buildPagination:function(){var c=this,g=c.options,f=c.element,d=parseInt(g.pageCount,10),b="";
c.paging.empty();if(d<2){return;}for(var e=1;e<=d;e++){b+="<li data-page="+e+" data-role='paging'><a href='#page-"+e+"'>"+e+"</a></li>";}c.paging.append(b);
c.paging.prepend(c.arrowPrev());c.paging.append(c.arrowNext());},arrowPrev:function(){var b=this,c=b.options;prevEl="<li data-role='prev-btn'><a href='#prev-btn'>"+c.previousBtn+"</a></li>";
return prevEl;},arrowNext:function(){var b=this,c=b.options;nextEl="<li data-role='next-btn'><a href='#next-btn'>"+c.nextBtn+"</a></li>";return nextEl;
},_isFirstPage:function(){return this.options.currentPage===1;},_isLastPage:function(){return this.options.currentPage===parseInt(this.options.pageCount,10);
},_disableLastAndFirst:function(){var b=this,d=b.options,c=b.element;a("li[data-role='prev-btn']",b.container)[(b._isFirstPage()?"add":"remove")+"Class"]("disabled");
a("li[data-role='next-btn']",b.container)[(b._isLastPage()?"add":"remove")+"Class"]("disabled");if(d.connectWith!=null&&a(d.connectWith).size()>0){a("li[data-role='prev-btn']",a(d.connectWith))[(b._isFirstPage()?"add":"remove")+"Class"]("disabled");
a("li[data-role='next-btn']",a(d.connectWith))[(b._isLastPage()?"add":"remove")+"Class"]("disabled");}},goToPrevPage:function(){var b=this,e=b.options,d=b.element,c=e.currentPage;
if(c>e.pageCount){c=e.pageCount;}this.setNewPage(c-1);},goToNextPage:function(){var b=this,e=b.options,d=b.element,c=e.currentPage;if(c<1){c=1;}b.setNewPage(c+1);
},setNewPage:function(e){var b=this,f=b.options,c=f.currentPage,d=isNaN(e)?1:parseInt(e,10);if(arguments.length===1&&!a.isEmptyObject(arguments[0])&&arguments[0].currentTarget){var d=b.getPageNumber(arguments[0]);
}switch(true){case (d<1):d=1;break;case (d>f.pageCount):d=f.pageCount;break;default:d=d;break;}f.currentPage=d;b.setActivePage();},setActivePage:function(f){var b=this,g=b.options,d=b.element,c=g.currentPage;
b._limitPaging();b._disableLastAndFirst();a("li[data-role='paging']",b.container).removeClass("active");a("li[data-page='"+g.currentPage+"']",b.container).addClass(this.widgetBaseClass+"-active active");
if(g.connectWith!=null&&a(g.connectWith).size()>0){b.createConnected();}b._trigger("pageChange",{type:"pageChange"},{newPage:g.currentPage,oldPage:c,pageTotal:g.pageCount});
},createConnected:function(){var b=this,c=b.options;var d=a(b.container).clone();console.log("cloine is ",d);a(c.connectWith).html(d);},getPageNumber:function(c){if(!c||!c.currentTarget){return;
}var b=parseInt(a(c.currentTarget).attr("data-page"),10);return b;},connectedControls:function(){var c=this,d=c.options,e=a(c.container).clone(),b;a(d.connectWith).on("click","li[data-role='prev-btn'], li[data-role='next-btn']",a.proxy(c.directionalNav,c));
a(d.connectWith).html(e);a(d.connectWith).on("click","li[data-role='paging']",a.proxy(function(f){f&&f.preventDefault();b=a(f.currentTarget).attr("data-page");
c.setNewPage(b);},c));},_setOption:function(c,d){var b=this.options[c];if(c=="currentPage"){this.setNewPage(d);}if(c==="limitPaging"){this.options.limitPaging=d;
this._limitPaging();}if(c==="hideEmpty"){this.options.hideEmpty=d;this._hideEmpty();}if(c==="pageCount"){this.options.pageCount=d;this.buildPagination();
this.setNewPage(this.options.currentPage);this._hideEmpty();}a.Widget.prototype._setOption.apply(this,arguments);this._trigger("setOption",{type:"setOption"},{option:c,original:b,current:d});
},_pagingStart:function(){var b=this,c=b.options,d=1;if(c.currentPage+c.pageLimit>=c.pageCount){return d=c.pageCount-(c.pageLimit*2)-1;}else{return d=(c.currentPage-c.pageLimit)<=1?1:(c.currentPage-c.pageLimit)-1;
}},_pagingEnd:function(){var d=this,e=d.options,c=1,b=(e.pageLimit*2)+2;if((e.currentPage+e.pageLimit)<=b){c=b;}else{c=(e.currentPage+e.pageLimit)>=e.pageCount?e.pageCount:e.currentPage+e.pageLimit;
}return c;},_limitPaging:function(){var b=this,c=b.element,e=b.options;indexStart=b._pagingStart(),indexEnd=b._pagingEnd(),visibleStart=e.currentPage-indexStart,visibleEnd=indexEnd-e.currentPage;
if(e.pageCount<10){return;}if(e.limitPaging){var d=a("li[data-role='paging']",b.container).hide();d.slice(indexStart,indexEnd).show();d.filter("[data-page='1']").show();
b.container.find("li[data-role='paging'][data-page='"+e.pageCount+"']").show();if(indexStart>=2){if(b.container.find(".first").size()<1){b.container.find("li[data-role='paging'][data-page='1']").after(a(this.divider).addClass("first"));
}}else{b.container.find(".first").remove();}if(indexEnd<e.pageCount){if(b.container.find(".last").size()<1){b.container.find("li[data-role='paging'][data-page='"+e.pageCount+"']").before(a(this.divider).addClass("last"));
}}else{b.container.find(".last").remove();}}else{a("li[data-role='paging']").show();}}});})(jQuery);